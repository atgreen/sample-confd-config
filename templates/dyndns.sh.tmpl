#!/bin/sh

if [ "x${TOWER_USER}" == "x" ]; then
    echo ERROR: TOWER_USER environment variable undefined.
    exit 1
fi

if [ "x${TOWER_PASSWORD}" == "x" ]; then
    echo ERROR: TOWER_PASSWORD environment variable undefined.
    exit 1
fi

curl -s -u ${TOWER_USER}:${TOWER_PASSWORD} \
     https://ansible-tower-web-svc-tower.apps.home.labdroid.net/api/v2/job_templates/labdroid-dynamic-dns/launch/?ip={{ getv "/dyndns/ip" }}

